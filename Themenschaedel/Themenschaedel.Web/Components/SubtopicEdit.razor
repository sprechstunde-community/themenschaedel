@using System.ComponentModel.DataAnnotations
@using Themenschaedel.Shared.Props
<h3>SubtopicEdit</h3>

<EditForm Model="@Subtopic">
    <DataAnnotationsValidator/>
    <ValidationSummary/>
    <InputText id="subtopic" disabled="@Disabled" Value="@Subtopic.name" ValueChanged="InputChanged" ValueExpression="() => Subtopic.name"/>
    <button @onclick="DeleteSubtopic" class="btn btn-outline-danger">Remove Subopic</button>
    <br/>
</EditForm>

@code {

    [Parameter]
    [Required]
    public Subtopics Subtopic { get; set; }

    [Parameter]
    public EventCallback<Subtopics> RemoveSubtopic { get; set; }
    
    [Parameter]
    public int Index { get; set; }

    [Parameter]
    public EventCallback<int> OnSubtopicChanged { get; set; }
    
    [Parameter]
    public bool Disabled { get; set; }

    protected async Task DeleteSubtopic()
    {
        await RemoveSubtopic.InvokeAsync(Subtopic);
    }

    protected async Task InputChanged(string value)
    {
        Subtopic.name = value;
        await OnSubtopicChanged.InvokeAsync(Index);
    }

}